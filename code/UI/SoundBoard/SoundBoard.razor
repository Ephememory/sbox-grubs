@namespace Grubs.UI

@if (Game.LocalPawn is not Grubs.Player player)
{
	return;
}

<root class="@(_isOpen ? "open" : "")">
    <label class="sound-title" text=@_hoveredSound?.Title />
	@{
        var canPlaySound = player.SinceSandboardPlay >= GrubsConfig.SoundboardCooldown;

        <div class="items">
		@foreach (var sound in GrubsGame.Instance.SoundBoardSounds)
		{
				<SoundBoardButton class="@(!canPlaySound ? "disabled" : "")"
                Sound=@sound
                @onmouseover=@(() => _hoveredSound = sound)
                @onmouseout=@(() => _hoveredSound = null)
                onclick=@( ()=> 
				{
					if( canPlaySound )
						GrubsGame.PlaySoundBoardSound(sound.Title); 
				})></SoundBoardButton>
		}
        </div>
	}
</root>

@code {

	private bool _isOpen;
    private SoundBoardSound _hoveredSound;

	public override void Tick()
	{
		_isOpen = Input.Down(Grubs.InputAction.SoundBoard) && !Inventory.IsOpen;
        Cursor.Enabled("SoundBoard", _isOpen);
	}

    protected override int BuildHash()
    {
        return HashCode.Combine(Time.Now);
    }
}

<style>
    SoundBoard {
        position: absolute;
        bottom: 225px;
        width: 375px;
        transition: all 150ms ease-out;
        opacity: 0;
        right: -200px;
        flex-direction: column;
        pointer-events: none;

        &.open {
            right: 100px;
            opacity: 1;
            sound-in: ui_inventory_open;
            pointer-events: all;
        }

        .sound-title {
            font-family: Londrina Solid;
            font-size: 40px;
            color: white;
            text-shadow: 2px 2px 0px black;
        }

        .items {
            flex-wrap: wrap;
            gap: 10px;
        }

    }
</style>
